
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A profiler for MRI Ruby">
      
      
      
        <link rel="canonical" href="https://ruby-prof.github.io/reports/">
      
      
        <link rel="prev" href="../advanced-usage/">
      
      
        <link rel="next" href="../profiling-rails/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="zensical-0.0.21">
    
    
      
        <title>Reports - ruby-prof</title>
      
    
    
      
        
      
      <link rel="stylesheet" href="../assets/stylesheets/modern/main.f28b7ce3.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,500,500i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)),0),__md_get=(e,t=localStorage,a=__md_scope)=>JSON.parse(t.getItem(a.pathname+"."+e)),__md_set=(e,t,a=localStorage,_=__md_scope)=>{try{a.setItem(_.pathname+"."+e,JSON.stringify(t))}catch(e){}},document.documentElement.setAttribute("data-platform",navigator.platform)</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reports" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ruby-prof" class="md-header__button md-logo" aria-label="ruby-prof" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-book-open" viewBox="0 0 24 24"><path d="M12 7v14M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-menu" viewBox="0 0 24 24"><path d="M4 5h16M4 12h16M4 19h16"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ruby-prof
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Reports
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-search" viewBox="0 0 24 24"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog" aria-label="Search">
  <button type="button" class="md-search__button">
    Search
  </button>
</div>
      
    
    <div class="md-header__source">
      
    </div>
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ruby-prof" class="md-nav__button md-logo" aria-label="ruby-prof" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-book-open" viewBox="0 0 24 24"><path d="M12 7v14M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>

    </a>
    ruby-prof
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Usage
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Reports
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Reports
  

    
  </span>
  
  

      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#flat-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flat Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graph Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#html-graph-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTML Graph Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-stack-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Call Stack Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flame-graph" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flame Graph
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-tree" class="md-nav__link">
    <span class="md-ellipsis">
      
        Call Tree
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphviz-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graphviz Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-info-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Call Info Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-reports" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Reports
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generating-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generating Examples
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../profiling-rails/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Profiling Rails
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#flat-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flat Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graph Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#html-graph-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        HTML Graph Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-stack-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Call Stack Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flame-graph" class="md-nav__link">
    <span class="md-ellipsis">
      
        Flame Graph
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-tree" class="md-nav__link">
    <span class="md-ellipsis">
      
        Call Tree
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graphviz-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Graphviz Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-info-report" class="md-nav__link">
    <span class="md-ellipsis">
      
        Call Info Report
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-reports" class="md-nav__link">
    <span class="md-ellipsis">
      
        Multiple Reports
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generating-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generating Examples
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  

<h1 id="reports">Reports<a class="headerlink" href="#reports" title="Permanent link">&para;</a></h1>
<p>Once you have completed a profiling run, ruby-prof provides a number of reports that you can use to analyze the results. Reports are created via the use of printers:</p>
<div class="language-ruby highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">RubyProf</span><span class="o">::</span><span class="no">Profile</span><span class="o">.</span><span class="n">profile</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">            </span><span class="o">...</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">          </span><span class="k">end</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">printer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">RubyProf</span><span class="o">::</span><span class="no">GraphPrinter</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">printer</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="no">STDOUT</span><span class="p">,</span><span class="w"> </span><span class="ss">:min_percent</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
</span></code></pre></div>
<p>The first parameter is any writable IO object such as <code>STDOUT</code> or a file. The second parameter specifies the minimum percentage a method must take to be printed. Percentages should be specified as integers in the range 0 to 100. For more information please see the documentation for the different printers.</p>
<p>The different types of reports, and their associated printers, are:</p>
<h2 id="flat-report">Flat Report<a class="headerlink" href="#flat-report" title="Permanent link">&para;</a></h2>
<p>The flat report shows the overall time spent in each method. It is a good way of quickly identifying which methods take the most time. Use <code>RubyProf::FlatPrinter</code> to generate this report. (<a href="../../public/examples/reports/flat.txt">example</a>)</p>
<h2 id="graph-report">Graph Report<a class="headerlink" href="#graph-report" title="Permanent link">&para;</a></h2>
<p>The graph report shows the overall time spent in each method. In addition, it also shows which methods call the current method and which methods it calls. Thus they are good for understanding how methods get called and provide insight into the flow of your program. Use <code>RubyProf::GraphPrinter</code> to generate this report. (<a href="../../public/examples/reports/graph.txt">example</a>)</p>
<h2 id="html-graph-report">HTML Graph Report<a class="headerlink" href="#html-graph-report" title="Permanent link">&para;</a></h2>
<p>HTML Graph profiles are the same as graph reports, except output is generated in hyper-linked HTML. Since graph reports can be quite large, the embedded links make it much easier to navigate the results. Use <code>RubyProf::GraphHtmlPrinter</code> to generate this report. (<a href="../../public/examples/reports/graph.html">example</a>)</p>
<h2 id="call-stack-report">Call Stack Report<a class="headerlink" href="#call-stack-report" title="Permanent link">&para;</a></h2>
<p>Call stack reports produce a HTML visualization of the time spent in each execution path of the profiled code. Use <code>RubyProf::CallStackPrinter</code> to generate this report. (<a href="../../public/examples/reports/call_stack.html">example</a>)</p>
<h2 id="flame-graph">Flame Graph<a class="headerlink" href="#flame-graph" title="Permanent link">&para;</a></h2>
<p>Flame graph reports produce a self-contained HTML visualization of the profiled code. Each method is represented as a horizontal bar whose width is proportional to its total time. Bars are stacked vertically by call depth, making it easy to identify hot code paths at a glance. A toggle switches between flame (bottom-up) and icicle (top-down) views. Use <code>RubyProf::FlameGraphPrinter</code> to generate this report. (<a href="../../public/examples/reports/flame_graph.html">example</a>)</p>
<p>Interactive features include hover tooltips (showing method name, self time, total time, percentage, and call count), click-to-zoom into a subtree, a reset zoom button, a search box to highlight matching methods, and a thread selector when multiple threads are profiled.</p>
<div class="language-ruby highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">printer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">RubyProf</span><span class="o">::</span><span class="no">FlameGraphPrinter</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">printer</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;flame_graph.html&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;w&quot;</span><span class="p">))</span>
</span></code></pre></div>
<h2 id="call-tree">Call Tree<a class="headerlink" href="#call-tree" title="Permanent link">&para;</a></h2>
<p>Call tree output results in the calltree profile format which is used by <a href="https://kcachegrind.github.io/html/Home.html">KCachegrind</a>. More information about the format can be found at the KCachegrind site. Use <code>RubyProf::CallTreePrinter</code> to generate this report. (<a href="../../public/examples/reports/callgrind.out">example</a>)</p>
<h2 id="graphviz-report">Graphviz Report<a class="headerlink" href="#graphviz-report" title="Permanent link">&para;</a></h2>
<p>The graphviz report is designed to be opened by <a href="https://www.graphviz.org/">Graphviz</a> to create visualization of profile results. The output can be visualized using the <a href="https://dreampuf.github.io/GraphvizOnline/">Graphviz Online</a> viewer. Use <code>RubyProf::DotPrinter</code> to generate this report. (<a href="../../public/examples/reports/graph.dot">example</a>, <a href="../../public/examples/reports/graphviz_viewer.html">view online</a>)</p>
<h2 id="call-info-report">Call Info Report<a class="headerlink" href="#call-info-report" title="Permanent link">&para;</a></h2>
<p>Call info reports print the call tree with timing information for each node. This is mainly useful for debugging purposes as it provides access into ruby-prof's internals. Use <code>RubyProf::CallInfoPrinter</code> to generate this report. (<a href="../../public/examples/reports/call_info.txt">example</a>)</p>
<h2 id="multiple-reports">Multiple Reports<a class="headerlink" href="#multiple-reports" title="Permanent link">&para;</a></h2>
<p><code>RubyProf::MultiPrinter</code> can generate several reports in one profiling run. It requires a directory path and a profile basename for the files it produces:</p>
<div class="language-ruby highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">printer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">RubyProf</span><span class="o">::</span><span class="no">MultiPrinter</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">printer</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="ss">:path</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;.&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:profile</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s2">&quot;profile&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="generating-examples">Generating Examples<a class="headerlink" href="#generating-examples" title="Permanent link">&para;</a></h2>
<p>To regenerate the example reports:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>ruby docs/public/examples/generate_reports.rb
</span></code></pre></div>
<p>This profiles a small word-frequency workload and writes reports to <code>docs/public/examples/reports/</code>.</p>














                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://zensical.org/" target="_blank" rel="noopener">
      Zensical
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      
      <script id="__config" type="application/json">{"annotate":null,"base":"..","features":[],"search":"../assets/javascripts/workers/search.e2d2d235.min.js","tags":null,"translations":{"clipboard.copied":"Copied to clipboard","clipboard.copy":"Copy to clipboard","search.result.more.one":"1 more on this page","search.result.more.other":"# more on this page","search.result.none":"No matching documents","search.result.one":"1 matching document","search.result.other":"# matching documents","search.result.placeholder":"Type to start searching","search.result.term.missing":"Missing","select.version":"Select version"},"version":null}</script>
    
    
      <script src="../assets/javascripts/bundle.36a64b72.min.js"></script>
      
    
  </body>
</html>